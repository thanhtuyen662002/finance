const partners = [
    {
    name: "EVOCARD",
    logo: "images/evocard/logo.png",
    benefits: [
      "✔️ Không cần chứng minh thu nhập",
      "✔️ Miễn lãi lên đến 45 ngày",
      "✔️ Miễn phí thường niên năm đầu không điều kiện",
      "✔️ Hoàn tiền đến 6 triệu/năm",
      "✔️ Hạn mức 75 triệu",
    ],
    link: "https://shorten.asia/Uwu3bFTz",
    guideSteps: [
      {
        img: "images/evocard/Step1.png",
        text: "",
      },
      {
        img: "images/evocard/Step2.png",
        text: "",
      },
      {
        img: "images/evocard/Step3.png",
        text: "",
      },
      {
        img: "images/evocard/Step4.png",
        text: "",
      },
      {
        img: "images/evocard/Step5.png",
        text: "",
      },
      {
        img: "images/evocard/Step6.png",
        text: "",
      },
      {
        img: "images/evocard/Step7.png",
        text: "",
      },
    ],
  },
  {
    name: "LioBank",
    logo: "images/liobank/logo.png",
    benefits: [
      "✔️ Thẻ '2 trong 1' - Kết hợp tín dụng và ghi nợ",
      "✔️ Phát hành nhanh – Không cần chứng minh thu nhập",
      "✔️ Miễn phí và trả góp linh hoạt",
      "✔️ Hoàn tiền lên tới 10%",
      "✔️ Hạn mức lên đến 200 triệu",
    ],
    link: "https://shorten.asia/1My4rcmQ",
    guideSteps: [
      {
        img: "images/liobank/Step1.png",
        text: "",
      },
      {
        img: "images/liobank/Step2.png",
        text: "",
      },
      {
        img: "images/liobank/Step3.png",
        text: "",
      },
      {
        img: "images/liobank/Step4.png",
        text: "",
      },
      {
        img: "images/liobank/Step5.png",
        text: "",
      },
      {
        img: "images/liobank/Step6.png",
        text: "",
      },
      {
        img: "images/util/note.png",
        text: "<strong>Lưu ý</strong> <p>1. Hiện tại, LioBank chỉ hỗ trợ giao thẻ vật lý đến 7 tỉnh thành (Hà Nội, Hồ Chí Minh, Hải Phòng, Cần Thơ, Đà Nẵng, Biên Hoà, Bà Rịa - Vũng Tàu)</p><p>2. Khách hàng chỉ thực hiện mở tài khoản 1 tài khoản 1 thiết bị.</p>",
      },
    ],
  },
  {
    name: "VIB",
    logo: "images/vib/logo.png",
    benefits: [
      "✔️ Đăng ký online chỉ cần CCCD",
      "✔️ Rút tiền mặt hạn mức lên tới 100%",
      "✔️ Miễn phí thường niên năm đầu không điều kiện",
      "✔️ Hoàn tiền đến 6%",
      "✔️ Hạn mức lên tới 600 triệu",
    ],
    link: "https://shorten.asia/Uwu3bFTz",
    guideSteps: [
      {
        img: "images/vib/Step1.png",
        text: "<span>Bước 1:</span> Khách hàng chọn thẻ <strong>Financial Free</strong> hoặc <strong>Online Plus 2 in 1</strong>",
      },
      {
        img: "images/vib/Step2.png",
        text: "<span>Financial Free</span> 'Tên đăng nhập publisher' và 'mã giới thiệu' khách hàng nhập <strong>vttst66202</strong> để được hỗ trợ duyệt nhanh.",
      },
      {
        img: "images/vib/Step3.png",
        text: "<span>Online Plus 2 in 1</span> Khách hàng nhập đầy đủ thông tin.",
      },
      {
        img: "images/util/note.png",
        text: "<strong>Lưu ý</strong> <p>1. Khách hàng là người Việt Nam tuổi từ 22 đến 65 tuổi.</p><p>2. Khách hàng có thu nhập 7.000.000 VNĐ/tháng trở lên (ưu tiên thu nhập qua bank).</p><p>3. Không có nợ xấu trong vòng 2 năm gần nhất.</p>",
      },
    ],
  },
  {
    name: "TP Bank",
    logo: "images/tpbank/logo.png",
    benefits: [
      "✔️ Mở thẻ dành cho điện thoại Android (miễn phí mở thẻ)",
      "✔️ Hoàn 20% tổng giá trị giao dịch",
      "✔️ Hoàn phí năm đầu khi chi tiêu đạt 1,000,000 VND trong 45 ngày mở mới",
      "✔️ Mở thẻ chỉ trong 5 phút",
      "✔️ Hạn mức từ 1 - 100 triệu",
    ],
    link: "https://shorten.asia/EaPSmyT7",
    guideSteps: [
      {
        img: "images/tpbank/Step1.png",
        text: "<span>Bước 1:</span> Nhập số điện thoại và mã xác thực OTP.",
      },
      {
        img: "images/tpbank/Step2.png",
        text: "<span>Bước 2:</span> Nhập thông tin công việc và CCCD.",
      },
      {
        img: "images/tpbank/Step3.png",
        text: "<span>Bước 2:</span> Nhập thông tin công việc và CCCD.",
      },
      {
        img: "images/tpbank/Step4.png",
        text: "<span>Bước 3:</span> Nhập thông tin bổ sung.",
      },
      {
        img: "images/tpbank/Step5.png",
        text: "<span>Bước 4:</span> Chọn thẻ phù hợp và cập nhật thông tin tại quầy.",
      },
      {
        img: "images/tpbank/Step6.png",
        text: "<span>Bước 5:</span> Xác thực giấy tờ tùy thân.",
      },
      {
        img: "images/tpbank/Step7.png",
        text: "<span>Bước 5:</span> Xác thực giấy tờ tùy thân.",
      },
      {
        img: "images/tpbank/Step8.png",
        text: "<span>Bước 6:</span> Xác thực khuôn mặt.",
      },
      {
        img: "images/tpbank/Step9.png",
        text: "<span>Bước 7:</span> Nhập thông tin bổ sung và chọn địa chỉ nhận thẻ.",
      },
      {
        img: "images/tpbank/Step10.png",
        text: "<span>Bước 8:</span> Thực hiện video call hoặc ký hợp đồng điện tử.",
      },
      {
        img: "images/tpbank/Step11.png",
        text: "<span>Bước 9:</span> Chờ kết quả phê duyệt.",
      },
      {
        img: "images/util/note.png",
        text: "<strong>Lưu ý</strong> <p>1. Khách hàng có quốc tịch Việt Nam.</p><p>2. Khách hàng phải từ 20 tuổi trở lên</p><p>3. Khách hàng không có nợ xấu, nợ quá hạn.</p>",
      },
    ],
  },
  {
    name: "TP Bank",
    logo: "images/tpbank/logo.png",
    benefits: [
      "✔️ Mở thẻ dành cho điện thoại IOS (miễn phí mở thẻ)",
      "✔️ Hoàn 20% tổng giá trị giao dịch",
      "✔️ Hoàn phí năm đầu khi chi tiêu đạt 1,000,000 VND trong 45 ngày mở mới",
      "✔️ Mở thẻ chỉ trong 5 phút",
      "✔️ Hạn mức từ 1 - 100 triệu",
    ],
    link: "https://shorten.asia/HjfpDvYZ",
    guideSteps: [
      {
        img: "images/tpbank/Step1.png",
        text: "<span>Bước 1:</span> Nhập số điện thoại và mã xác thực OTP.",
      },
      {
        img: "images/tpbank/Step2.png",
        text: "<span>Bước 2:</span> Nhập thông tin công việc và CCCD.",
      },
      {
        img: "images/tpbank/Step3.png",
        text: "<span>Bước 2:</span> Nhập thông tin công việc và CCCD.",
      },
      {
        img: "images/tpbank/Step4.png",
        text: "<span>Bước 3:</span> Nhập thông tin bổ sung.",
      },
      {
        img: "images/tpbank/Step5.png",
        text: "<span>Bước 4:</span> Chọn thẻ phù hợp và cập nhật thông tin tại quầy.",
      },
      {
        img: "images/tpbank/Step6.png",
        text: "<span>Bước 5:</span> Xác thực giấy tờ tùy thân.",
      },
      {
        img: "images/tpbank/Step7.png",
        text: "<span>Bước 5:</span> Xác thực giấy tờ tùy thân.",
      },
      {
        img: "images/tpbank/Step8.png",
        text: "<span>Bước 6:</span> Xác thực khuôn mặt.",
      },
      {
        img: "images/tpbank/Step9.png",
        text: "<span>Bước 7:</span> Nhập thông tin bổ sung và chọn địa chỉ nhận thẻ.",
      },
      {
        img: "images/tpbank/Step10.png",
        text: "<span>Bước 8:</span> Thực hiện video call hoặc ký hợp đồng điện tử.",
      },
      {
        img: "images/tpbank/Step11.png",
        text: "<span>Bước 9:</span> Chờ kết quả phê duyệt.",
      },
      {
        img: "images/util/note.png",
        text: "<strong>Lưu ý</strong> <p>1. Khách hàng có quốc tịch Việt Nam.</p><p>2. Khách hàng phải từ 20 tuổi trở lên</p><p>3. Khách hàng không có nợ xấu, nợ quá hạn.</p>",
      },
    ],
  },
  {
    name: "VP Bank SenID",
    logo: "images/vpbank/logo.png",
    benefits: [
      "✔️ Phê duyệt tự động",
      "✔️ Ưu đãi lên đến 50% toàn Việt Nam và nước ngoài",
      "✔️ Duyệt hồ sơ trong 24h",
      "✔️ Mở thẻ chỉ trong 10 phút",
      "✔️ Hạn mức từ 10 - 70 triệu",
    ],
    link: "https://shorten.asia/eFeDNzev",
    guideSteps: [
      {
        img: "images/vpbank/Step1.png",
        text: "<span>Bước 1:</span> Nhập số điện thoại và mã xác thực OTP.",
      },
      {
        img: "images/vpbank/Step2.png",
        text: "<span>Bước 2:</span> Nhập thông tin công việc và CCCD.",
      },
      {
        img: "images/vpbank/Step3.png",
        text: "<span>Bước 2:</span> Nhập thông tin công việc và CCCD.",
      },
      {
        img: "images/vpbank/Step4.png",
        text: "<span>Bước 3:</span> Nhập thông tin bổ sung.",
      },
      {
        img: "images/vpbank/Step5.png",
        text: "<span>Bước 4:</span> Chọn thẻ phù hợp và cập nhật thông tin tại quầy.",
      },
      {
        img: "images/vpbank/Step6.png",
        text: "<span>Bước 5:</span> Xác thực giấy tờ tùy thân.",
      },
      {
        img: "images/vpbank/Step7.png",
        text: "<span>Bước 5:</span> Xác thực giấy tờ tùy thân.",
      },
      {
        img: "images/vpbank/Step8.png",
        text: "<span>Bước 6:</span> Xác thực khuôn mặt.",
      },
      {
        img: "images/vpbank/Step9.png",
        text: "<span>Bước 7:</span> Nhập thông tin bổ sung và chọn địa chỉ nhận thẻ.",
      },
      {
        img: "images/vpbank/Step10.png",
        text: "<span>Bước 8:</span> Thực hiện video call hoặc ký hợp đồng điện tử.",
      },
      {
        img: "images/vpbank/Step11.png",
        text: "<span>Bước 9:</span> Chờ kết quả phê duyệt.",
      },
      {
        img: "images/util/note.png",
        text: "<strong>Lưu ý</strong> <p>1. Cá nhân, là người Việt Nam hoặc người nước ngoài đang sống tại Việt Nam, tuổi từ 22 đến 60 tại thời điểm nộp hồ sơ.</p><p>2. Khách hàng có thu nhập từ 4.500.000 VNĐ/tháng tùy thuộc vào loại thẻ lựa chọn</p>",
      },
    ],
  },
  {
    name: "VP Bank 3T",
    logo: "images/vpbank/logo.png",
    benefits: [
      "✔️ Phê duyệt tự động",
      "✔️ Ưu đãi lên đến 50% toàn Việt Nam và nước ngoài",
      "✔️ Duyệt hồ sơ trong 24h",
      "✔️ Mở thẻ chỉ trong 10 phút",
      "✔️ Hạn mức từ 20 - 500 triệu",
    ],
    link: "https://shorten.asia/Fg34N4uy",
    guideSteps: [
      {
        img: "images/vpbank/Step1b.png",
        text: "<span>Bước 1:</span> Nhập thông tin cá nhân > xác thực OTP > chọn nhu cầu về thẻ tín dụng",
      },
      {
        img: "images/vpbank/Step2b.png",
        text: "<span>Bước 2:</span> Xác thực giấy tờ tùy thân.",
      },
      {
        img: "images/vpbank/Step3b.png",
        text: "<span>Bước 3:</span> Bổ sung thông tin.",
      },
      {
        img: "images/vpbank/Step4b.png",
        text: "<span>Bước 4:</span> Chọn thẻ tín dụng.",
      },
      {
        img: "images/vpbank/Step5b.png",
        text: "<span>Bước 5:</span> Thêm thông tin bảo mật.",
      },
      {
        img: "images/vpbank/Step6b.png",
        text: "<span>Bước 6:</span> Xác nhận hợp đồng và nhận kết quả mở thẻ.",
      },
      {
        img: "images/util/note.png",
        text: "<strong>Lưu ý</strong> <p>1. Cá nhân, là người Việt Nam hoặc người nước ngoài đang sống tại Việt Nam, tuổi từ 22 đến 60 tại thời điểm nộp hồ sơ.</p><p>2. Khách hàng có thu nhập từ 4.500.000 VNĐ/tháng tùy thuộc vào loại thẻ lựa chọn</p>",
      },
    ],
  },
];

// Tạo card
const container = document.getElementById("partners");

partners.forEach((p, index) => {
  const card = document.createElement("div");
  card.className = "partner-card";
  card.innerHTML = `
    <div class="logo"><img src="${p.logo}" alt="${p.name}"></div>
    <ul>${p.benefits.map((b) => `<li>${b}</li>`).join("")}</ul>
    <a href="#" class="btn open-guide" data-index="${index}">Mở thẻ ngay</a>
  `;
  container.appendChild(card);
});

// Modal logic
const modal = document.getElementById("guideModal");
const guideStep = document.getElementById("guide-step");
const prevBtn = document.getElementById("prevStep");
const nextBtn = document.getElementById("nextStep");
const closeBtn = document.querySelector(".modal .close");
const startBtn = document.getElementById("startRegister");

let currentStep = 0;
let currentPartner = null;

function showStep(stepIndex) {
  const step = currentPartner.guideSteps[stepIndex];
  guideStep.innerHTML = `
    <p>${step.text}</p>
    <img src="${step.img}" alt="Step ${stepIndex + 1}">
  `;

  // Ẩn bằng visibility để giữ layout
  prevBtn.classList.toggle("hidden-visibility", stepIndex === 0);
  nextBtn.classList.toggle(
    "hidden-visibility",
    stepIndex === currentPartner.guideSteps.length - 1
  );
  startBtn.classList.toggle(
    "hidden",
    stepIndex !== currentPartner.guideSteps.length - 1
  );
}

document.querySelectorAll(".open-guide").forEach((btn) => {
  btn.addEventListener("click", (e) => {
    e.preventDefault();
    const index = parseInt(btn.dataset.index);
    currentPartner = partners[index];
    currentStep = 0;
    showStep(currentStep);
    modal.classList.remove("hidden");
  });
});

nextBtn.onclick = () => {
  if (currentStep < currentPartner.guideSteps.length - 1) {
    currentStep++;
    showStep(currentStep);
  }
};

prevBtn.onclick = () => {
  if (currentStep > 0) {
    currentStep--;
    showStep(currentStep);
  }
};

closeBtn.onclick = () => {
  modal.classList.add("hidden");
};

startBtn.onclick = () => {
  window.open(currentPartner.link, "_blank");
  modal.classList.add("hidden");
};

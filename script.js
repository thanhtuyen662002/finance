const partners = [
  {
    name: "Tnex",
    logo: "images/tnex/tnex.png",
    benefits: [
      "✔️ Vay tiền chỉ cần CCCD",
      "✔️ Không chứng minh thu nhập, không thẩm định người thân",
      "✔️ Lãi suất thấp nhất trên thị trường vay tín chấp",
      "✔️ Nhận ngay khoản vay chỉ trong 15 phút",
      "✔️ Mức giải ngân đa dạng từ 3 - 10 triệu, dành cho mọi đối tượng",
    ],
    link: "https://shorten.asia/W2t1tsFY",
    guideSteps: [
      {
        img: "images/tnex/Step1.png",
        text: "<span>Bước 1:</span> Điền Họ Tên và số điện thoại sau đó ấn <strong>Đăng ký vay ngay</strong>.",
      },
      {
        img: "images/tnex/Step2.png",
        text: "<span>Bước 2:</span> Ấn <strong>Tải ứng dụng TNEX ngay</strong>.",
      },
      {
        img: "images/tnex/Step3.png",
        text: "<span>Bước 3:</span> Xác thực số điện thoại (không cần nhập mã giới thiệu).",
      },
      {
        img: "images/tnex/Step4.png",
        text: "<span>Bước 4:</span> Chọn mục vay tiêu dùng.",
      },
      {
        img: "images/tnex/Step5.png",
        text: "<span>Bước 5:</span> Khuyến khích trên 5M để được duyệt nhanh và nhập mã <strong>AT100</strong>.",
      },
      {
        img: "images/tnex/Step6.png",
        text: "<span>Bước 6:</span> Tiến hành đăng ký và xác thực thông tin.",
      },
      {
        img: "images/tnex/Step7.png",
        text: "<span>Bước 7:</span> Thông báo phê duyệt sẽ được gửi qua Email. Sau khi nhận được Email thì khách hàng quay lại app để ký hợp đồng và nhận khoản vay. (Thời gian phê duyệt tối đa 3 ngày).",
      },
      {
        img: "images/tnex/Note.png",
        text: "<strong>Lưu ý</strong> <p>1. Khách hàng có địa chỉ thường trú trên CMT/CCCD <strong>không nằm</strong> trong các tỉnh/thành phố sau: Hải Phòng, Sóc Trăng, Quảng Ninh, Bến Tre, Tây Ninh, Đắk Nông, Đắk Lắk, Gia Lai, Cà Mau, Điện Biên, Lai Châu, Sơn La, Tuyên Quang, Kon Tum, Yên Bái</p><p>2. Có nhu cầu vay thật và thu nhập từ 8 triệu/tháng trở lên.</p><p>3. Khách hàng có list danh bạ thật, không được để trống danh bạ và cho phép truy cập vào danh bạ khi đăng ký vay.</p>",
      },
    ],
  },
  {
    name: "Tnex Telesale",
    logo: "images/tnex/logo.png",
    benefits: [
      "✔️ Vay tiền chỉ cần CCCD",
      "✔️ Không chứng minh thu nhập, không thẩm định người thân",
      "✔️ Thẻ ghi nợ cực chất được giao tận tay, không cần phải đến ngân hàng",
      "✔️ Đảm bảo không có chi phí ẩn",
      "✔️ Mức giải ngân đa dạng từ 5 - 20 triệu, dành cho mọi đối tượng",
    ],
    link: "https://shorten.asia/gXkkUphu",
    guideSteps: [
      {
        img: "images/tnex/Step1.png",
        text: "<span>Bước 1:</span> Điền Họ Tên và số điện thoại sau đó ấn <strong>Đăng ký vay ngay</strong>.",
      },
      {
        img: "images/tnex/Step2.png",
        text: "<span>Bước 2:</span> Ấn <strong>Tải ứng dụng TNEX ngay</strong>.",
      },
      {
        img: "images/tnex/Step3.png",
        text: "<span>Bước 3:</span> Xác thực số điện thoại (không cần nhập mã giới thiệu).",
      },
      {
        img: "images/tnex/Step4.png",
        text: "<span>Bước 4:</span> Chọn mục vay tiêu dùng.",
      },
      {
        img: "images/tnex/Step5.png",
        text: "<span>Bước 5:</span> Khuyến khích trên 5M để được duyệt nhanh và nhập mã <strong>AT100</strong>.",
      },
      {
        img: "images/tnex/Step6.png",
        text: "<span>Bước 6:</span> Tiến hành đăng ký và xác thực thông tin.",
      },
      {
        img: "images/tnex/Step7.png",
        text: "<span>Bước 7:</span> Thông báo phê duyệt sẽ được gửi qua Email. Sau khi nhận được Email thì khách hàng quay lại app để ký hợp đồng và nhận khoản vay. (Thời gian phê duyệt tối đa 3 ngày).",
      },
      {
        img: "images/tnex/Note.png",
        text: "<strong>Lưu ý</strong> <p>1. Khách hàng có địa chỉ thường trú trên CMT/CCCD <strong>không nằm</strong> trong các tỉnh/thành phố sau: Hải Phòng, Sóc Trăng, Quảng Ninh, Bến Tre, Tây Ninh, Đắk Nông, Đắk Lắk, Gia Lai, Cà Mau, Điện Biên, Lai Châu, Sơn La, Tuyên Quang, Kon Tum, Yên Bái</p><p>2. Có nhu cầu vay thật và thu nhập từ 8 triệu/tháng trở lên.</p><p>3. Khách hàng có list danh bạ thật, không được để trống danh bạ và cho phép truy cập vào danh bạ khi đăng ký vay.</p>",
      },
    ],
  },
  {
    name: "Lotte Finace",
    logo: "images/lotte/logo.webp",
    benefits: [
      "✔️ Vay tiền chỉ cần CCCD",
      "✔️ Ưu tiên cán bộ công chức, viên chức, dân văn phòng, công nhân",
      "✔️ Thời hạn vay dài từ 6 - 60 tháng",
      "✔️ Giải ngân nhanh, trong vòng 4h với các hồ sơ đạt yêu cầu",
      "✔️ Hạn mức vay cao lên đến 500tr",
    ],
    link: "https://shorten.asia/eCyvcfS1",
    guideSteps: [
      {
        img: "images/lotte/Step1.png",
        text: "Khách hàng điền đầy đủ thông tin sau đó ấn <strong>Đăng ký vay ngay</strong>.",
      },
      {
        img: "images/util/note.png",
        text: "<strong>Lưu ý</strong> <p>1. Khách hàng có độ tuổi từ 25 tới 60 tuổi, có thu nhập trên 7 triệu/tháng, có hợp đồng lao động chính thức từ 1 năm và thời gian làm việc từ 3 năm trở lên.</p><p>2. Ưu tiên Khách hàng là cán bộ công chức, viên chức, dân văn phòng, công nhân và có nhu cầu vay từ 10 tới 500 triệu đồng trong thời hạn từ 6 tới 60 tháng.</p><p>3. Ưu tiên: khách hàng nữ, có thu nhập trên 3 triệu/tháng, có nhu cầu vay từ 10 tới 100 triệu trong thời hạn từ 6 tới 36 tháng.</p>",
      },
    ],
  },
  {
    name: "FECREDIT",
    logo: "images/fecredit/logo.png",
    benefits: [
      "✔️ Vay tiền chỉ cần CCCD",
      "✔️ Thủ tục đơn giản, không thế chấp",
      "✔️ Thời hạn vay dài từ 6 - 60 tháng",
      "✔️ Tỷ lệ duyệt vay cao",
      "✔️ Gói vay từ 10 triệu – 100 triệu đồng",
    ],
    link: "https://shorten.asia/BXWU6Y1c",
    guideSteps: [
      {
        img: "images/fecredit/Step1.png",
        text: "Khách hàng điền đầy đủ thông tin sau đó ấn <strong>Gửi</strong> và nhớ chú ý điện thoại trong vòng 15 phút để được tư vấn.",
      },
      {
        img: "images/util/note.png",
        text: "<strong>Lưu ý</strong> <p>1. Khách hàng có độ tuổi từ 25 tới 60 tuổi, có thu nhập trên 4 triệu/tháng, ưu tiên khách hàng cũ sẽ được giải ngân cao hơn.</p><p>2. Khách được vay song song với khoản vay mua xe, mua điện thoại.</p><p>3. Nhu cầu vay từ 10 triệu trở lên (Nhu cầu vay thấp hơn sẽ không được tư vấn tiếp).</p><p>4. Sau khi có màn hình thông báo Đăng ký hồ sơ vay thành công chiến dịch FECredit, khách hàng không nên tắt trình duyệt ngay. <strong>Nên đợi 1 - 2 phút để Website load đầy đủ trang.</strong></p>",
      },
    ],
  },
  {
    name: "HOMECREDIT",
    logo: "images/homecredit/logo.png",
    benefits: [
      "✔️ Vay tiền chỉ cần CCCD",
      "✔️ Không chứng minh thu nhập, không thẩm định người thân",
      "✔️ Thời hạn vay dài từ 6 - 57 tháng",
      "✔️ Quy trình xét duyệt hồ sơ và giải ngân nhanh nhất chỉ trong 10 phút",
      "✔️ Hỗ trợ vay từ 5 - 200 triệu",
    ],
    link: "https://shorten.asia/aerSAjcw",
    guideSteps: [
      {
        img: "images/homecredit/Step1.png",
        text: "<span>Bước 1:</span> Chọn <strong>vay tiền online nhanh</strong> sau đó ấn <strong>Vay ngay</strong>.",
      },
      {
        img: "images/homecredit/Step2.png",
        text: "<span>Bước 2:</span> Chọn khoảng vay.",
      },
      {
        img: "images/homecredit/Step3.png",
        text: "<span>Bước 3:</span> Nhập thông tin cá nhân.",
      },
      {
        img: "images/homecredit/Step4.png",
        text: "<span>Bước 4:</span> Nhập mã OTP được gửi về số điện thoại.",
      },
      {
        img: "images/homecredit/Step5.png",
        text: "<span>Bước 5:</span> Màn hình như sau là đã <strong>vay thành công</strong>.",
      },
      {
        img: "images/util/Note.png",
        text: "<strong>Lưu ý</strong> <p>1. Khách hàng có địa chỉ thường trú ở miền Nam và các thành phố lớn của miền Bắc.</p><p>2. Khách hàng có thu nhập từ 7.5 - 24tr mỗi tháng trở lên.</p><p>3. Khách hàng có độ tuổi từ 25 - 45 tuổi và đã tốt nghiệp cấp 3.</p>",
      },
    ],
  },
  {
    name: "Tima",
    logo: "images/tima/logo.png",
    benefits: [
      "✔️ Vay tiền chỉ cần CCCD và giấy tờ xe (xe máy hoặc ô tô)",
      "✔️ Cam kết không giữ tài sản đảm bảo",
      "✔️ Thời hạn vay từ 9 - 12 tháng",
      "✔️ Quy trình online 99%, hỗ trợ tận nơi",
      "✔️ Hạn mức vay cao từ 3 - 500tr",
    ],
    link: "https://shorten.asia/Hjask8Xk",
    guideSteps: [
      {
        img: "images/tima/Step1.png",
        text: "Khách hàng điền đầy đủ thông tin sau đó ấn <strong>Nhận tiền ngay</strong>.",
      },
      {
        img: "images/util/note.png",
        text: "<strong>Lưu ý</strong> <p>1. Khách hàng là công dân Việt Nam trong độ tuổi 18 – 65 tuổi tính đến thời điểm tất toán khoản vay.</p><p>2. Đang sinh sống và làm việc thường xuyên tại khu vực: Hà Nội, Sài Gòn, Bình Dương, Đồng Nai, Hưng Yên, Bắc Ninh, Bắc Giang, Vĩnh Phúc, Hải Dương, Thanh Hoá, Nghệ An.</p><p>3. Có bản chụp ảnh gốc CMND/thẻ căn cước/hộ chiếu và có bản chụp ảnh gốc sổ hộ khẩu.</p><p>4. Khách hàng có hoặc đang sử dụng xe ô tô theo giấy tờ của đăng ký/ cà vẹt xe ô tô và có đăng ký xe ô tô và giấy đăng kiểm.</p>",
      },
    ],
  },
  {
    name: "Tima",
    logo: "images/tima/logo.png",
    benefits: [
      "✔️ Vay tiền chỉ cần CCCD và giấy tờ xe (xe máy hoặc ô tô)",
      "✔️ Tỷ lệ duyệt lên đến 95% (cứ đăng ký là được vay)",
      "✔️ Kỳ hạn vay linh hoạt 6 tháng - 9 tháng - 12 tháng - 36 tháng",
      "✔️ Nhận tiền ngay chỉ trong 2 giờ",
      "✔️ Hỗ trợ vay nhanh từ 42TR - 100TR - 200TR - 500TR - 1TỶ - 2 TỶ",
    ],
    link: "https://shorten.asia/Vqhpwugw",
    guideSteps: [
      {
        img: "images/tima/Step1.0.png",
        text: "Khách hàng điền đầy đủ thông tin sau đó ấn <strong>Đăng ký vay</strong>.",
      },
      {
        img: "images/util/note.png",
        text: "<strong>Lưu ý</strong> <p>1. Khách hàng là công dân Việt Nam trong độ tuổi 18 – 65 tuổi tính đến thời điểm tất toán khoản vay.</p><p>2. Đang sinh sống và làm việc thường xuyên tại khu vực: Hà Nội, Sài Gòn, Bình Dương, Đồng Nai, Hưng Yên, Bắc Ninh, Bắc Giang, Vĩnh Phúc, Hải Dương, Thanh Hoá, Nghệ An.</p><p>3. Có bản chụp ảnh gốc CMND/thẻ căn cước/hộ chiếu và có bản chụp ảnh gốc sổ hộ khẩu.</p><p>4. Khách hàng có hoặc đang sử dụng xe ô tô theo giấy tờ của đăng ký/ cà vẹt xe ô tô và có đăng ký xe ô tô và giấy đăng kiểm.</p>",
      },
    ],
  },
];

// Tạo card
const container = document.getElementById("partners");

partners.forEach((p, index) => {
  const card = document.createElement("div");
  card.className = "partner-card";
  card.innerHTML = `
    <div class="logo"><img src="${p.logo}" alt="${p.name}"></div>
    <ul>${p.benefits.map((b) => `<li>${b}</li>`).join("")}</ul>
    <a href="#" class="btn open-guide" data-index="${index}">Đăng ký vay ngay</a>
  `;
  container.appendChild(card);
});

// Modal logic
const modal = document.getElementById("guideModal");
const guideStep = document.getElementById("guide-step");
const prevBtn = document.getElementById("prevStep");
const nextBtn = document.getElementById("nextStep");
const closeBtn = document.querySelector(".modal .close");
const startBtn = document.getElementById("startRegister");

let currentStep = 0;
let currentPartner = null;

function showStep(stepIndex) {
  const step = currentPartner.guideSteps[stepIndex];
  guideStep.innerHTML = `
    <p>${step.text}</p>
    <img src="${step.img}" alt="Step ${stepIndex + 1}">
  `;

  // Ẩn bằng visibility để giữ layout
  prevBtn.classList.toggle("hidden-visibility", stepIndex === 0);
  nextBtn.classList.toggle(
    "hidden-visibility",
    stepIndex === currentPartner.guideSteps.length - 1
  );
  startBtn.classList.toggle(
    "hidden",
    stepIndex !== currentPartner.guideSteps.length - 1
  );
}

document.querySelectorAll(".open-guide").forEach((btn) => {
  btn.addEventListener("click", (e) => {
    e.preventDefault();
    const index = parseInt(btn.dataset.index);
    currentPartner = partners[index];
    currentStep = 0;
    showStep(currentStep);
    modal.classList.remove("hidden");
  });
});

nextBtn.onclick = () => {
  if (currentStep < currentPartner.guideSteps.length - 1) {
    currentStep++;
    showStep(currentStep);
  }
};

prevBtn.onclick = () => {
  if (currentStep > 0) {
    currentStep--;
    showStep(currentStep);
  }
};

closeBtn.onclick = () => {
  modal.classList.add("hidden");
};

startBtn.onclick = () => {
  window.open(currentPartner.link, "_blank");
  modal.classList.add("hidden");
};

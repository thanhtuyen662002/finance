const partners = [
  {
    name: "Báº£o hiá»ƒm CI Global Care",
    logo: "images/ciglobalcare/logo.svg",
    benefits: [
      "ğŸŒŸ Thá»§ tá»¥c bá»“i thÆ°á»ng nhanh, Ä‘Æ¡n giáº£n, há»— trá»£ khÃ¡ch hÃ ng 24/7",
      "ğŸŒŸ KhÃ´ng cáº§n khÃ¡m sá»©c khá»e váº«n tham gia Ä‘Æ°á»£c gÃ³i Bá»‡nh Hiá»ƒm NghÃ¨o",
      "ğŸŒŸ Thiáº¿t káº¿ riÃªng cho bá»‡nh Ung thÆ°, Äau tim, Äá»™t quá»µ",
      "ğŸŒŸ Dá»… dÃ ng sá»Ÿ há»¯u vá»›i gÃ³i báº£o vá»‡ 1, 5, 10 nÄƒm, tÃ¡i tá»¥c Ä‘Æ¡n giáº£n",
      "ğŸŒŸ PhÃ­ báº£o hiá»ƒm há»£p lÃ½ â€“ phÃ¹ há»£p Ä‘á»™ tuá»•i, giá»›i tÃ­nh, thu nháº­p ngÆ°á»i Viá»‡t",
    ],
    link: "https://shorten.asia/QUVzyFvT",
    guideSteps: [
      {
        img: "images/ciglobalcare/Step1.png",
        text: "KhÃ¡ch hÃ ng Ä‘iá»n Ä‘áº§y Ä‘á»§ thÃ´ng tin vÃ  nhÃ¢n viÃªn tÆ° váº¥n sáº½ chá»§ Ä‘á»™ng liÃªn há»‡ ngay sau Ä‘Ã³.",
      },
    ],
  },
  {
    name: "Báº£o hiá»ƒm HÃ¹ng VÆ°Æ¡ng",
    logo: "images/hungvuong/logo.jpg",
    benefits: [
      "ğŸŒŸ Äa dáº¡ng tá»« xe cá»™, nhÃ  cá»­a, sá»©c khá»e, du lá»‹ch vÃ  tai náº¡n",
      "ğŸŒŸ Bá»“i thÆ°á»ng online 24/24",
      "ğŸŒŸ Xá»­ lÃ½ há»“ sÆ¡ bá»“i thÆ°á»ng trong vÃ²ng 5 ngÃ y lÃ m viá»‡c",
      "ğŸŒŸ KhÃ¡ch hÃ ng chá»‰ cáº§n gá»­i yÃªu cáº§u bá»“i thÆ°á»ng thÃ´ng qua app BHV",
      "ğŸŒŸ Chi phÃ­ há»£p lÃ½ phÃ¹ há»£p vá»›i ngÆ°á»i Viá»‡t Nam",
    ],
    link: "https://shorten.asia/MyFsSccn",
    guideSteps: [
      {
        img: "images/hungvuong/Step1.png",
        text: "KhÃ¡ch hÃ ng chá»n gÃ³i báº£o hiá»ƒm theo nhu cáº§u sau Ä‘Ã³ tiáº¿n hÃ nh Ä‘iá»n thÃ´ng tin vÃ  thanh toÃ¡n.",
      },
    ],
  },
  {
    name: "Báº£o hiá»ƒm Báº£o Minh",
    logo: "images/baominh/logo.png",
    benefits: [
      "ğŸŒŸ Báº£o hiá»ƒm Ä‘a dáº¡ng: Ã´ tÃ´, xe mÃ¡y, du lá»‹ch, nhÃ  á»Ÿ, tai náº¡n",
      "ğŸŒŸ Má»©c trÃ¡ch nhiá»‡m lÃªn tá»›i 150.000$",
      "ğŸŒŸ Chi tráº£ báº£o hiá»ƒm 24/24",
      "ğŸŒŸ Pháº¡m vi rá»™ng, kÃ¨m cá»©u há»™, sá»­a chá»¯a, thay tháº¿ cao cáº¥p",
      "ğŸŒŸ Báº£o vá»‡ nhÃ  khá»i há»a hoáº¡n, thiÃªn tai, trá»™m cáº¯p, sá»± cá»‘ khÃ¡c",
    ],
    link: "https://shorten.asia/Mc8p1wtX",
    guideSteps: [
      {
        img: "images/baominh/Step1.png",
        text: "KhÃ¡ch hÃ ng Ä‘iá»n Ä‘áº§y Ä‘á»§ thÃ´ng tin vÃ  nhÃ¢n viÃªn tÆ° váº¥n sáº½ chá»§ Ä‘á»™ng liÃªn há»‡ ngay sau Ä‘Ã³.",
      },
    ],
  },
  {
    name: "Báº£o hiá»ƒm VBI",
    logo: "images/vbi/logo.png",
    benefits: [
      "ğŸŒŸ Chi tráº£ ngay cáº£ khi NDBH bá»‹ nhiá»…m dá»‹ch bá»‡nh",
      "ğŸŒŸ Thá»i háº¡n báº£o hiá»ƒm ngáº¯n, tá»« 3 - 6 thÃ¡ng",
      "ğŸŒŸ Há»— trá»£ chi phÃ­ chá»¯a bá»‡nh ná»n cÃ³ sáºµn",
      "ğŸŒŸ Thá»i gian chá» ngáº¯n trong vÃ²ng 7 ngÃ y",
      "ğŸŒŸ GiÃ¡ sáº£n pháº©m tháº¥p - chá»‰ tá»« VND 210,000",
    ],
    link: "https://shorten.asia/swEqsxep",
    guideSteps: [
      {
        img: "images/vbi/Step1.png",
        text: "KhÃ¡ch hÃ ng áº¥n vÃ o <strong>MUA Báº¢O HIá»‚M</strong> sau Ä‘Ã³ chá»n báº£o hiá»ƒm theo nhu cáº§u.",
      },
    ],
  },
];

// Táº¡o card
const container = document.getElementById("partners");

partners.forEach((p, index) => {
  const card = document.createElement("div");
  card.className = "partner-card";
  card.innerHTML = `
    <div class="logo"><img src="${p.logo}" alt="${p.name}"></div>
    <ul>${p.benefits.map((b) => `<li>${b}</li>`).join("")}</ul>
    <a href="#" class="btn open-guide" data-index="${index}">ÄÄƒng kÃ½ ngay</a>
  `;
  container.appendChild(card);
});

// Modal logic
const modal = document.getElementById("guideModal");
const guideStep = document.getElementById("guide-step");
const prevBtn = document.getElementById("prevStep");
const nextBtn = document.getElementById("nextStep");
const closeBtn = document.querySelector(".modal .close");
const startBtn = document.getElementById("startRegister");

let currentStep = 0;
let currentPartner = null;

function showStep(stepIndex) {
  const step = currentPartner.guideSteps[stepIndex];
  guideStep.innerHTML = `
    <p>${step.text}</p>
    <img src="${step.img}" alt="Step ${stepIndex + 1}">
  `;

  // áº¨n báº±ng visibility Ä‘á»ƒ giá»¯ layout
  prevBtn.classList.toggle("hidden-visibility", stepIndex === 0);
  nextBtn.classList.toggle(
    "hidden-visibility",
    stepIndex === currentPartner.guideSteps.length - 1
  );
  startBtn.classList.toggle(
    "hidden",
    stepIndex !== currentPartner.guideSteps.length - 1
  );
}

document.querySelectorAll(".open-guide").forEach((btn) => {
  btn.addEventListener("click", (e) => {
    e.preventDefault();
    const index = parseInt(btn.dataset.index);
    currentPartner = partners[index];
    currentStep = 0;
    showStep(currentStep);
    modal.classList.remove("hidden");
  });
});

nextBtn.onclick = () => {
  if (currentStep < currentPartner.guideSteps.length - 1) {
    currentStep++;
    showStep(currentStep);
  }
};

prevBtn.onclick = () => {
  if (currentStep > 0) {
    currentStep--;
    showStep(currentStep);
  }
};

closeBtn.onclick = () => {
  modal.classList.add("hidden");
};

startBtn.onclick = () => {
  window.open(currentPartner.link, "_blank");
  modal.classList.add("hidden");
};

modal.addEventListener("click", (e) => {
  if (e.target === modal) {
    modal.classList.add("hidden");
  }
});

const menuToggle = document.querySelector('.menu-toggle');
const navMenu = document.querySelector('.main-nav ul');

menuToggle.addEventListener('click', () => {
  navMenu.classList.toggle('show');
});

document.getElementById("nextStep").classList.add("fade-slide-up");
document.getElementById("prevStep").classList.add("fade-slide-up");

